install:
	@echo "===> Installing..."

	install -Dm755 artifacts/usr/bin/gpclient $(DESTDIR)/usr/bin/gpclient
	install -Dm755 artifacts/usr/bin/gpservice $(DESTDIR)/usr/bin/gpservice
	install -Dm755 artifacts/usr/bin/gpauth $(DESTDIR)/usr/bin/gpauth

	# Install the HIP report script
	install -Dm755 artifacts/usr/libexec/gpclient/hipreport.sh $(DESTDIR)/usr/libexec/gpclient/hipreport.sh

	# Install the disconnect hooks
	install -Dm755 artifacts/usr/lib/NetworkManager/dispatcher.d/pre-down.d/gpclient.down $(DESTDIR)/usr/lib/NetworkManager/dispatcher.d/pre-down.d/gpclient.down
	install -Dm755 artifacts/usr/lib/NetworkManager/dispatcher.d/gpclient-nm-hook $(DESTDIR)/usr/lib/NetworkManager/dispatcher.d/gpclient-nm-hook

uninstall:
	@echo "===> Uninstalling from $(DESTDIR)..."

	rm -f $(DESTDIR)/usr/bin/gpclient
	rm -f $(DESTDIR)/usr/bin/gpservice
	rm -f $(DESTDIR)/usr/bin/gpauth

	rm -f $(DESTDIR)/usr/libexec/gpclient/hipreport.sh

	rm -f $(DESTDIR)/usr/lib/NetworkManager/dispatcher.d/pre-down.d/gpclient.down
	rm -f $(DESTDIR)/usr/lib/NetworkManager/dispatcher.d/gpclient-nm-hook
